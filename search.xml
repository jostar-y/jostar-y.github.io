<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>todo</title>
    <url>/2021/04/15/todo/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Todoâ€¦</p>
<span id="more"></span>

<h4 id="Erlang"><a href="#Erlang" class="headerlink" title="Erlang"></a>Erlang</h4><p>gc</p>
<p>rika</p>
<p>hot_reload</p>
<p>cluster</p>
<p>node</p>
<p>io:user</p>
<p>binary</p>
<h4 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h4><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><p>ä¸»ä»</p>
<h4 id="Protocol"><a href="#Protocol" class="headerlink" title="Protocol"></a>Protocol</h4><p>tcp</p>
<p>udp</p>
<p>http</p>
<p>mqtt</p>
<p>coap</p>
]]></content>
  </entry>
  <entry>
    <title>lager</title>
    <url>/2021/04/15/lager/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h4 id="1ã€åŸºæœ¬é…ç½®"><a href="#1ã€åŸºæœ¬é…ç½®" class="headerlink" title="1ã€åŸºæœ¬é…ç½®"></a>1ã€åŸºæœ¬é…ç½®</h4><p>rebar.config</p>
<figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line">{erl_opts,[</span><br><span class="line">    ...</span><br><span class="line">    {parse_transform, lager_transform},     </span><br><span class="line">    {lager_truncation_size, <span class="number">1024</span>},          <span class="comment">% é™åˆ¶å•æ¡æ—¥å¿—æœ€å¤§å°ºå¯¸</span></span><br><span class="line">    {lager_extra_sinks, [msg]},             <span class="comment">% æ‰©å±•æ—¥å¿—</span></span><br><span class="line">    ...</span><br><span class="line">]}.</span><br><span class="line"></span><br><span class="line">{deps,[</span><br><span class="line">       {lager, <span class="string">"3.9.1"</span>}</span><br><span class="line">      ]}</span><br></pre></td></tr></tbody></table></figure>

<span id="more"></span>

<p>sys.config</p>
<figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {lager_test, []},</span><br><span class="line">    {lager, [</span><br><span class="line"></span><br><span class="line">        {log_root, <span class="string">"./log"</span>},                <span class="comment">% æ—¥å¿—æ ¹ç›®å½•</span></span><br><span class="line"></span><br><span class="line">        {crash_log, <span class="string">"crash.log"</span>},           <span class="comment">% è®¾ç½®åå½“ç³»ç»Ÿå‘ç”Ÿä¸¥é‡å´©æºƒæ—¶ï¼Œä¼šå°†æ—¥å¿—è®°å½•åœ¨æ­¤æ–‡ä»¶ä¸­</span></span><br><span class="line">        {crash_log_msg_size, <span class="number">65536</span>},        <span class="comment">% å´©æºƒæ—¥å¿—çš„æ¶ˆæ¯å¤§å°çš„é™åˆ¶</span></span><br><span class="line">        {crash_log_size, <span class="number">10485760</span>},         <span class="comment">% å´©æºƒæ—¥å¿—çš„æ–‡ä»¶å¤§å°é™åˆ¶</span></span><br><span class="line">        {crash_log_data, <span class="string">"$D0"</span>},            <span class="comment">% å´©æºƒæ—¥å¿—çš„åˆ‡å‰²æ—¶é—´</span></span><br><span class="line">        {crash_log_count, <span class="number">5</span>},               <span class="comment">% å´©æºƒæ—¥å¿—çš„åˆ‡å‰²æ•°é‡</span></span><br><span class="line"></span><br><span class="line">        {reverse_pretty_stacktrace, true},      <span class="comment">% ç¿»è½¬å †æ ˆè¾“å‡ºé¡ºåº</span></span><br><span class="line">        {error_logger_redirect, true},          <span class="comment">% æ˜¯å¦é‡å®šå‘error_loggeræ¶ˆæ¯</span></span><br><span class="line">        {error_logger_hwm, <span class="number">50</span>},                 <span class="comment">% error_loggeræ¶ˆæ¯çš„é«˜æ°´ä½çº¿ï¼Œè¶…è¿‡å°†è¢«ä¸¢å¼ƒ å¦‚æœæƒ³è¦ç¼“å­˜ä¸€å®šæ•°é‡æ¶ˆæ¯ï¼Œåˆ™å¼€å¯ä¸‹é¢çš„å±æ€§</span></span><br><span class="line">        <span class="comment">% {error_logger_flush_queue, true},       % å¼€å¯ä¸¢å¼ƒæ¶ˆæ¯ é»˜è®¤ï¼štrue</span></span><br><span class="line">        <span class="comment">% {error_logger_flush_threshold, 1000},   % å½“æ¶ˆæ¯è¶…è¿‡é«˜æ°´ä½çº¿æ—¶ï¼Œå¹¶ä¸”è¶…è¿‡æ­¤ä¸Šçº¿æ—¶ï¼Œè¶…è¿‡çš„æ¶ˆæ¯å°†è¢«ä¸¢å¼ƒ é»˜è®¤ï¼š0</span></span><br><span class="line"></span><br><span class="line">        {async_threshold, <span class="number">20</span>},              <span class="comment">% å½“æ—¥å¿—æ¶ˆæ¯ç§¯ç´¯åˆ°ä¸€å®šæ•°é‡æ—¶åˆ‡æ¢åˆ°åŒæ­¥æ¨¡å¼ï¼ˆåå‹ï¼‰è®¾ç½®ä¸ºundefinedç¦ç”¨    å¯ä»¥å•ç‹¬åœ¨sinkä¸­å®šä¹‰</span></span><br><span class="line">        {async_threshold_window, <span class="number">5</span>},        <span class="comment">% æ¡£æ—¥å¿—æ¶ˆæ¯å‡å°‘åˆ°ä¸€å®šæ•°é‡æ—¶åˆ‡æ¢åˆ°å¼‚æ­¥æ¨¡å¼  æ¯”å¦‚è¿™é‡Œå°±æ˜¯20 - 5 = 15 å½“æ¶ˆæ¯å°‘äº15æ—¶åˆ‡å›å¼‚æ­¥  å¯ä»¥å•ç‹¬åœ¨sinkä¸­å®šä¹‰</span></span><br><span class="line">        <span class="comment">% {flush_queue, true}                 % åŠŸèƒ½ä¸ error_logger_flush_queue ä¸€æ · å¯ä»¥å•ç‹¬åœ¨sinkä¸­å®šä¹‰ é»˜è®¤ï¼štrue</span></span><br><span class="line">        <span class="comment">% {flush_threshold, 1000}             % åŠŸèƒ½ä¸ error_logger_flush_threshold ä¸€æ · å¯ä»¥å•ç‹¬åœ¨sinkä¸­å®šä¹‰ é»˜è®¤ï¼š0</span></span><br><span class="line"></span><br><span class="line">        {handlers, [</span><br><span class="line">            <span class="comment">%% lager_console_backend å¯è®¾ç½®å‚æ•°</span></span><br><span class="line">            <span class="comment">%% level æ—¥å¿—çº§åˆ«ï¼ˆéœ€è¦å®šä¹‰ï¼‰</span></span><br><span class="line">            <span class="comment">%% formatter æ ¼å¼åŒ–æ¨¡å— é»˜è®¤ï¼šlager_default_formatter</span></span><br><span class="line">            <span class="comment">%% formatter_config æ—¥å¿—æ ¼å¼ï¼Œé»˜è®¤ï¼š[time, " ", color, "[", severity,"] ", message]</span></span><br><span class="line">            <span class="comment">%% user_stderr æ˜¯å¦ä½¿ç”¨stderr é»˜è®¤ï¼šfalse</span></span><br><span class="line">            <span class="comment">%% group_leader æŒ‡å®šè¦è¾“å‡ºçš„io_server é»˜è®¤ï¼šfalse ä½¿ç”¨userè¿›ç¨‹ä½œä¸ºio_server</span></span><br><span class="line">            {lager_console_backend, [</span><br><span class="line">                {level, debug},</span><br><span class="line">                {formatter_config, [time, <span class="string">" "</span>, <span class="string">"["</span>, serverity, <span class="string">"]"</span>, module, <span class="string">":"</span>, function, <span class="string">" "</span>, message, <span class="string">"\n"</span>]}</span><br><span class="line">            ]},</span><br><span class="line"></span><br><span class="line">            <span class="comment">%% lager_file_backend å¯è®¾ç½®å‚æ•°</span></span><br><span class="line">            <span class="comment">%% file æ—¥å¿—æ–‡ä»¶åï¼ˆéœ€è¦å®šä¹‰ï¼‰</span></span><br><span class="line">            <span class="comment">%% level æ—¥å¿—çº§åˆ« é»˜è®¤ï¼š&gt;=info</span></span><br><span class="line">            <span class="comment">%% size æ—¥å¿—æ–‡ä»¶å¤§å° é»˜è®¤ï¼š10MB</span></span><br><span class="line">            <span class="comment">%% date æ—¥å¿—åˆ‡å‰²æ—¶é—´ é»˜è®¤ï¼š$D0 æ¯æ—¥0ç‚¹</span></span><br><span class="line">            <span class="comment">%% count æ—¥å¿—åˆ‡åˆ†æ•°é‡ é»˜è®¤ï¼š5</span></span><br><span class="line">            <span class="comment">%% rotation æ—¥å¿—åˆ‡å‰²å¤„ç†æ¨¡å— é»˜è®¤ï¼šlager_rotator_default</span></span><br><span class="line">            <span class="comment">%% formatter æ ¼å¼åŒ–æ¨¡å— é»˜è®¤ï¼šlager_default_formatter</span></span><br><span class="line">            <span class="comment">%% formatter_config æ—¥å¿—æ ¼å¼ï¼ˆéœ€è¦å®šä¹‰ï¼‰</span></span><br><span class="line">            <span class="comment">%% sync_on ç«‹å³åŒæ­¥æ—¥å¿—çº§åˆ« é»˜è®¤ï¼šerror</span></span><br><span class="line">            <span class="comment">%% sync_interval æ—¥å¿—å†™æ–‡ä»¶é—´éš” é»˜è®¤ï¼š1000æ¯«ç§’</span></span><br><span class="line">            <span class="comment">%% sync_size æ—¥å¿—å†™æ–‡ä»¶å¤§å° é»˜è®¤ï¼š64KB</span></span><br><span class="line">            {lager_file_backend, [</span><br><span class="line">                {file, <span class="string">"error.log"</span>},</span><br><span class="line">                {level, '&gt;=error'},</span><br><span class="line">                {formatter_config, [time, <span class="string">" "</span>, <span class="string">"["</span>, serverity, <span class="string">"]"</span>, module, <span class="string">":"</span>, function, <span class="string">" "</span>, message, <span class="string">"\n"</span>]}</span><br><span class="line">            ]},</span><br><span class="line">            {lager_file_backend, [</span><br><span class="line">                {file, <span class="string">"info.log"</span>},</span><br><span class="line">                {level, '&lt;=warning'},</span><br><span class="line">                {formatter_config, [time, <span class="string">" "</span>, <span class="string">"["</span>, serverity, <span class="string">"]"</span>, module, <span class="string">":"</span>, function, <span class="string">" "</span>, message, <span class="string">"\n"</span>]}</span><br><span class="line">            ]}</span><br><span class="line">        ]},</span><br><span class="line"></span><br><span class="line">        <span class="comment">% {killer_hwm, 1000},               % å¦‚æœæ¶ˆæ¯é«˜æ°´ä½çº¿è¶…è¿‡æ­¤å€¼ åˆ™åˆ æ‰ç›¸å…³æ¥æ”¶å™¨è¿›ç¨‹ é»˜è®¤ï¼šundefined</span></span><br><span class="line">        <span class="comment">% {killer_reinstall_after, 5000}    % è¾¾åˆ°æ­¤æ—¶é—´åé‡å¯æ­¤æ¥æ”¶å™¨è¿›ç¨‹    é»˜è®¤ï¼š5000æ¯«ç§’</span></span><br><span class="line">        {extra_sinks, [</span><br><span class="line">            {msg_lager_event, [</span><br><span class="line">                {handlers, [</span><br><span class="line">                    {lager_file_backend, [</span><br><span class="line">                        {file, <span class="string">"msg.log"</span>},</span><br><span class="line">                        {level, '=info'},</span><br><span class="line">                        {formatter_config, [time, <span class="string">" "</span>, <span class="string">"["</span>, serverity, <span class="string">"]"</span>, module, <span class="string">":"</span>, function, <span class="string">" "</span>, message, <span class="string">"\n"</span>]}</span><br><span class="line">                    ]}</span><br><span class="line">                ]}</span><br><span class="line">            ]}</span><br><span class="line">        ]}</span><br><span class="line">    ]}</span><br><span class="line">].</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p><a href="https://github.com/erlang-lager/lager#custom-formatting">è‡ªå®šä¹‰è¾“å‡ºæ ·å¼</a></p>
</li>
<li><p><a href="https://github.com/erlang-lager/lager#internal-log-rotation">æ—¥å¿—åˆ‡åˆ†ç­–ç•¥</a></p>
</li>
<li><p><a href="https://github.com/erlang-lager/lager#colored-terminal-output">ç»ˆç«¯å½©è‰²è¾“å‡º</a></p>
</li>
<li><p><a href="https://hex.pm/packages?_utf8=%E2%9C%93&amp;search=lager&amp;sort=recent_downloads">å…¶ä»– lager åç«¯</a></p>
</li>
</ul>
<h4 id="2ã€lagerçš„æ—¥å¿—ç­‰çº§åˆ’åˆ†"><a href="#2ã€lagerçš„æ—¥å¿—ç­‰çº§åˆ’åˆ†" class="headerlink" title="2ã€lagerçš„æ—¥å¿—ç­‰çº§åˆ’åˆ†"></a>2ã€lager çš„æ—¥å¿—ç­‰çº§åˆ’åˆ†</h4><p>ä»ä½åˆ°é«˜åˆ†åˆ«ä¸ºï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">debug &lt; info &lt; notice &lt; warning &lt; error &lt; critical &lt; alter &lt; emergency</span><br></pre></td></tr></tbody></table></figure>

<p>lager æ”¯æŒç±»ä¼¼ syslog å½¢å¼å®šä¹‰çº§åˆ«ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line">info        % infoåŠæ›´é«˜çº§åˆ«ï¼ˆ&gt;=info éšå¼ï¼‰</span><br><span class="line">=debug      % åªæœ‰debugçº§åˆ«</span><br><span class="line">!=info      % é™¤äº†infoçº§åˆ«ä»¥å¤–çš„æ‰€æœ‰çº§åˆ«</span><br><span class="line">&lt;=notice    % noticeåŠæ›´ä½çº§åˆ«</span><br><span class="line">&lt;warning    % ä»»ä½•å°äºwarningçš„çº§åˆ«</span><br></pre></td></tr></tbody></table></figure>



<h4 id="3ã€ä½¿ç”¨æŠ€å·§"><a href="#3ã€ä½¿ç”¨æŠ€å·§" class="headerlink" title="3ã€ä½¿ç”¨æŠ€å·§"></a>3ã€ä½¿ç”¨æŠ€å·§</h4><ul>
<li><p>ä½¿ç”¨è‡ªå®šä¹‰ sink</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Args)</span>, msg:info<span class="params">(Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Format, Args)</span>, msg:info<span class="params">(Format, Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Attr, Format, Args)</span>, msg:info<span class="params">(Attr, Format, Args)</span>).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Args).</span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Format, Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Format, Args).</span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Attr, Format, Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Attr, Format, Args).</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>æ‰©å±• sink æ‰“å°çš„æ—¥å¿—ä¸ä¼šæ˜¾ç¤ºåˆ° console ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹æ³•å®ç°</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">%% msg_lager_event ä¸ºè‡ªå®šä¹‰sink</span></span><br><span class="line"><span class="comment">%% æ·»åŠ handler</span></span><br><span class="line"><span class="number">1</span>&gt; gen_event:add_handler(msg_lager_event, lager_console_backend, [{level, debug}]).    </span><br><span class="line">ok</span><br><span class="line"><span class="comment">%% åˆ é™¤handler</span></span><br><span class="line"><span class="number">2</span>&gt; gen_event:delete_handler(msg_lager_event, lager_console_backend, [{level, debug}]).</span><br><span class="line">ok</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>æŸ¥çœ‹æ—¥å¿—çº§åˆ«</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>&gt; lager:get_loglevel(lager_console_backend).</span><br><span class="line">debug</span><br><span class="line"><span class="number">2</span>&gt; lager:get_loglevel({lager_file_backend,<span class="string">"info.log"</span>}).</span><br><span class="line">debug</span><br><span class="line"><span class="number">3</span>&gt; lager:get_loglevel({lager_file_backend,<span class="string">"error.log"</span>}).</span><br><span class="line">error</span><br><span class="line"><span class="number">4</span>&gt; lager:get_loglevel(msg_lager_event, {lager_file_backend,<span class="string">"msg.log"</span>}).</span><br><span class="line">info</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>è®¾ç½®æ—¥å¿—çº§åˆ«</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>&gt; lager:set_loglevel(lager_console_backend,'info'). </span><br><span class="line">ok</span><br><span class="line"><span class="number">2</span>&gt; lager:set_loglevel({lager_file_backend, <span class="string">"info.log"</span>},'debug').                          </span><br><span class="line"><span class="number">15</span>:<span class="number">16</span>:<span class="number">01.552</span> [Undefined]lager_file_backend:Undefined Changed loglevel <span class="keyword">of</span> c:/Users/gz1417/Desktop/lager_test/log/info.log to debug</span><br><span class="line">ok</span><br><span class="line"><span class="number">3</span>&gt; lager:set_loglevel(msg_lager_event, {lager_file_backend, <span class="string">"msg.log"</span>}, undefined, 'info').</span><br><span class="line">ok</span><br><span class="line"><span class="number">15</span>:<span class="number">12</span>:<span class="number">43.449</span> [Undefined]lager_file_backend:Undefined Changed loglevel <span class="keyword">of</span> c:/Users/gz1417/Desktop/lager_test/log/msg.log to info</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>trace console</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>&gt; lager:set_loglevel(lager_console_backend, info).     <span class="comment">% è®¾ç½®ä¸ºinfoåŠä»¥ä¸Šçº§åˆ«</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">2</span>&gt; log1:debug(<span class="string">"aaa"</span>).                                   <span class="comment">% debugçº§åˆ«å·²ç»æ— æ³•åœ¨consoleä¸­è¾“å‡ºå†…å®¹</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">3</span>&gt; log1:info(<span class="string">"aaa"</span>).                                    <span class="comment">% infoçº§åˆ«å¯ä»¥</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">15</span>:<span class="number">53</span>:<span class="number">20.297</span> [Undefined]log1:info aaa</span><br><span class="line"><span class="number">4</span>&gt; lager:trace_console([{module, log1}]).               <span class="comment">% è®¾ç½®è·Ÿè¸ªlog1æ¨¡å—çš„æ‰€æœ‰æ—¥å¿—</span></span><br><span class="line">{ok,{lager_console_backend,[{module,log1}],debug}}</span><br><span class="line"><span class="number">5</span>&gt; log1:debug(<span class="string">"aaa"</span>).                   </span><br><span class="line">ok</span><br><span class="line"><span class="number">15</span>:<span class="number">51</span>:<span class="number">13.308</span> [Undefined]log1:debug aaa</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>trace è‡ªå®šä¹‰ tag</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>&gt; lager:set_loglevel(lager_console_backend, info).     <span class="comment">% è®¾ç½®ä¸ºinfoåŠä»¥ä¸Šçº§åˆ«</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">2</span>&gt; log1:debug([{name, dy}],<span class="string">"~s"</span>,[<span class="string">"s_name"</span>]).  <span class="comment">% debugçº§åˆ«å·²ç»æ— æ³•åœ¨consoleä¸­è¾“å‡ºå†…å®¹</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">3</span>&gt; lager:trace_console([{name, dy}]).</span><br><span class="line">{ok,{lager_console_backend,[{name, dy}], debug}}</span><br><span class="line"><span class="number">4</span>&gt; log1:debug([{name, dy}],<span class="string">"~s"</span>,[<span class="string">"s_name"</span>]).   <span class="comment">% è®¾ç½®è·Ÿè¸ªtagä¸ºdyçš„æ‰€æœ‰æ—¥å¿—</span></span><br><span class="line">ok</span><br><span class="line"><span class="number">16</span>:<span class="number">41</span>:<span class="number">47.715</span> [Undefined]log1:debug s_name</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>trace æ–‡ä»¶ ä½†è¾“å‡ºåˆ°æ–‡ä»¶ä¸­çš„æ—¥å¿—å¹¶ä¸èƒ½æ‰“å°åˆ° console éœ€è¦ gen_event:add_handler æ·»åŠ  lager_console_backend</p>
  <figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span>&gt; lager:trace_file(<span class="string">"msg.log"</span>, [{sink, msg_lager_event}, {module, log1}]).</span><br><span class="line">{ok,{{lager_file_backend,<span class="string">"c:/Users/gz1417/Desktop/lager_test/log/msg.log"</span>},</span><br><span class="line">     [{sink,msg_lager_event},{module,log1}],</span><br><span class="line">     debug}}</span><br></pre></td></tr></tbody></table></figure>

</li>
<li><p>æ¼”ç¤ºæ–‡ä»¶</p>
</li>
</ul>
<figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">%% log.hrl</span></span><br><span class="line"><span class="keyword">-define</span><span class="params">(DEBUG(Args)</span>, lager:debug<span class="params">(Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(DEBUG(Format, Args)</span>, lager:debug<span class="params">(Format, Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(DEBUG(Attr, Format, Args)</span>, lager:debug<span class="params">(Attr, Format, Args)</span>).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(INFO(Args)</span>, lager:info<span class="params">(Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(INFO(Format, Args)</span>, lager:info<span class="params">(Format, Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(INFO(Attr, Format, Args)</span>, lager:info<span class="params">(Attr, Format, Args)</span>).</span><br><span class="line"></span><br><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Args)</span>, msg:info<span class="params">(Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Format, Args)</span>, msg:info<span class="params">(Format, Args)</span>).</span><br><span class="line"><span class="keyword">-define</span><span class="params">(MSG(Attr, Format, Args)</span>, msg:info<span class="params">(Attr, Format, Args)</span>).</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight erlang"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">%% log1.erl</span></span><br><span class="line"><span class="keyword">-module</span><span class="params">(log1)</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">-include</span><span class="params">(<span class="string">"log.hrl"</span>)</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">%% API</span></span><br><span class="line"><span class="keyword">-export</span><span class="params">([</span></span><br><span class="line"><span class="params">    debug/<span class="number">1</span>, debug/<span class="number">2</span>, debug/<span class="number">3</span>,</span></span><br><span class="line"><span class="params">    info/<span class="number">1</span>, info/<span class="number">2</span>, info/<span class="number">3</span>,</span></span><br><span class="line"><span class="params">    msg/<span class="number">1</span>, msg/<span class="number">2</span>, msg/<span class="number">3</span></span></span><br><span class="line"><span class="params">])</span>.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">debug</span><span class="params">(Args)</span> -&gt;</span></span><br><span class="line">    ?DEBUG(Args).</span><br><span class="line"><span class="function"><span class="title">debug</span><span class="params">(Format, Args)</span> -&gt;</span></span><br><span class="line">    ?DEBUG(Format, Args).</span><br><span class="line"><span class="function"><span class="title">debug</span><span class="params">(Attr, Format, Args)</span> -&gt;</span></span><br><span class="line">    ?DEBUG(Attr, Format, Args).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">info</span><span class="params">(Args)</span> -&gt;</span></span><br><span class="line">    ?INFO(Args).</span><br><span class="line"><span class="function"><span class="title">info</span><span class="params">(Format, Args)</span> -&gt;</span></span><br><span class="line">    ?INFO(Format, Args).</span><br><span class="line"><span class="function"><span class="title">info</span><span class="params">(Attr, Format, Args)</span> -&gt;</span></span><br><span class="line">    ?INFO(Attr, Format, Args).</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Args).</span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Format, Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Format, Args).</span><br><span class="line"><span class="function"><span class="title">msg</span><span class="params">(Attr, Format, Args)</span> -&gt;</span></span><br><span class="line">    ?MSG(Attr, Format, Args).</span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <tags>
        <tag>erlang</tag>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title>é‚£äº›æ­Œ</title>
    <url>/2021/04/15/%E9%82%A3%E4%BA%9B%E6%AD%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h5 id="x1f442-ç½‘æ˜“äº‘"><a href="#x1f442-ç½‘æ˜“äº‘" class="headerlink" title="ğŸ‘‚ç½‘æ˜“äº‘"></a><span class="github-emoji" alias="ear" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f442.png?v8">ğŸ‘‚</span>ç½‘æ˜“äº‘</h5>
    <div id="aplayer-VbRlPryb" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="6647556685" data-server="netease" data-type="playlist" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#ad7a86"></div>


]]></content>
      <tags>
        <tag>essay</tag>
      </tags>
  </entry>
</search>
